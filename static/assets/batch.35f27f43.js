var p=(u,a,e)=>new Promise((s,n)=>{var i=t=>{try{l(e.next(t))}catch(c){n(c)}},o=t=>{try{l(e.throw(t))}catch(c){n(c)}},l=t=>t.done?s(t.value):Promise.resolve(t.value).then(i,o);l((e=e.apply(u,a)).next())});import{v as _}from"./index.62164120.js";import{d as D,u as E,I as g,x as m,o as k,c as F,i as f,w as y,k as b,p as S,W as h}from"./index.59f76cad.js";const w=D({props:{rows:{type:Array,default(){return[]}},form:{type:Object,default(){return{}}}},setup(u,{emit:a}){const e=E(),s=g();let n=null;const i=[{label:"\u64CD\u4F5C\u9009\u4E2D",key:"1",children:[{label:"\u9501\u5B9A\u9009\u4E2D",key:"lock_1"},{label:"\u89E3\u9501\u9009\u4E2D",key:"unlock_1"},{label:"\u5220\u9664\u9009\u4E2D",key:"delete_1"}]},{label:"\u64CD\u4F5C\u7B5B\u9009",key:"2",children:[{label:"\u9501\u5B9A\u7B5B\u9009",key:"lock_2"},{label:"\u89E3\u9501\u7B5B\u9009",key:"unlock_2"},{label:"\u5220\u9664\u7B5B\u9009",key:"delete_2"}]}];let o=u.form;const l=JSON.stringify(o),t=()=>u.rows.length!==0;return{options:i,handleSelect:d=>p(this,null,function*(){let r=JSON.parse(JSON.stringify(u.form)),B=JSON.parse(JSON.stringify(u.rows));const C=d.split("_");if(Number(C[1])===2){if(l==JSON.stringify(o))return e.warning("\u8BF7\u81F3\u5C11\u8BBE\u7F6E\u4E00\u4E2A\u7B5B\u9009\u6761\u4EF6")}else{if(!t())return e.warning("\u8BF7\u81F3\u5C11\u9009\u4E2D\u4E00\u9879\u6570\u636E");r.id=JSON.stringify(B)}n=e.create("\u52A0\u8F7D\u4E2D...",{type:"loading",duration:1e4}),["delete_1","delete_2"].indexOf(d)>-1?s.warning({title:"\u6E29\u99A8\u63D0\u793A",content:"\u5220\u9664\u64CD\u4F5C\u5C06\u4E0D\u53EF\u9006!(\u8BF7\u8C28\u614E\u64CD\u4F5C)",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",onPositiveClick:()=>p(this,null,function*(){r.type=d,yield _(r),n.destroy(),a("on-update")}),onNegativeClick:()=>{e.error("\u53D6\u6D88\u64CD\u4F5C"),n.destroy()}}):(r.type=d,yield _(r),n.destroy(),a("on-update"))}),formData:o}}});function N(u,a,e,s,n,i){const o=S,l=h;return k(),F("div",null,[f(l,{options:u.options,placement:"bottom-start",trigger:"click",onSelect:u.handleSelect},{default:y(()=>[f(o,null,{default:y(()=>[b("\u6279\u91CF\u64CD\u4F5C")]),_:1})]),_:1},8,["options","onSelect"])])}const J=m(w,[["render",N]]);export{J as default};
