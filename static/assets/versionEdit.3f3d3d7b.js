var y=(e,t,_)=>new Promise((f,i)=>{var v=r=>{try{a(_.next(r))}catch(l){i(l)}},d=r=>{try{a(_.throw(r))}catch(l){i(l)}},a=r=>r.done?f(r.value):Promise.resolve(r.value).then(v,d);a((_=_.apply(e,t)).next())});import{R as U,S as V}from"./index.62164120.js";import{s as N}from"./componentSetting.a3b3dac8.js";import{u as $}from"./app.ce630fce.js";import{d as A,r as B,b as O,u as M,$ as P,y as R,a0 as D,x as J,o as p,z as g,w as n,i as s,a as Q,l as q,c as C,Q as E,M as F,k as h,t as b,B as z,m as I,C as T,cQ as G,cR as H,_ as K,p as W,q as X,aa as Y}from"./index.59f76cad.js";const{project:Z}=N,w=$(),j={id:0,manager_id:0,project_id:null,version:null,is_must_update:0,is_active:0,notice:"",wgt_url:""},x=A({props:{show:{type:Boolean,default:!1},title:{type:String,default:""},form:{type:Object,default(){return j}}},setup(e,{emit:t}){const{version_is_must_update:_,version_is_active:f}=Z,i=B(!1),v=O({}),d=M();let a=null;const r=P(()=>JSON.parse(JSON.stringify(w.getProjectList))),l=B({id:0,manager_id:0,project_id:null,version:null,is_must_update:0,is_active:0,notice:"",wgt_url:""}),c=()=>y(this,null,function*(){if(a=d.create("\u52A0\u8F7D\u4E2D...",{type:"loading",duration:1e4}),l.value.id>0){let u=yield U(l.value);u!==void 0&&u>0?(i.value=!1,a.destroy(),t("on-update"),yield w.fetchCardList(!0)):a.destroy()}else{let u=yield V(l.value);u!==void 0&&u>0?(i.value=!1,a.destroy(),t("on-update"),yield w.fetchCardList(!0)):a.destroy()}});return R(()=>y(this,null,function*(){i.value=e.show,yield w.fetchProjectList(!1)})),D(()=>e.show,u=>{i.value=u}),D(()=>e.form,u=>{u===null?l.value=j:l.value=u}),D(i,u=>{t("update:show",u)}),{version_is_active:f,version_is_must_update:_,formData:l,rules:v,modalShow:i,handleOk:c,projectList:r}}});const ee={class:"form-view"};function te(e,t,_,f,i,v){const d=z,a=I,r=T,l=G,c=H,u=K,k=W,S=X,L=Y;return p(),g(L,{title:e.title,style:{width:"600px"},preset:"card",show:e.modalShow,"onUpdate:show":t[6]||(t[6]=o=>e.modalShow=o)},{default:n(()=>[s(S,{ref:"formRef",inline:!1,"label-width":80,model:e.formData,rules:e.rules},{default:n(()=>[Q("div",ee,[e.formData.id===0?(p(),g(a,{key:0,label:"\u5F52\u5C5E\u9879\u76EE",path:"project_id"},{default:n(()=>[s(d,{"label-field":"name","value-field":"id",value:e.formData.project_id,"onUpdate:value":t[0]||(t[0]=o=>e.formData.project_id=o),options:e.projectList,placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u9879\u76EE"},null,8,["value","options"])]),_:1})):q("",!0),s(a,{label:"\u7248\u672C\u53F7",path:"version"},{default:n(()=>[s(r,{value:e.formData.version,"onUpdate:value":t[1]||(t[1]=o=>e.formData.version=o),min:0,max:999,step:.01,clearable:""},null,8,["value","step"])]),_:1}),s(a,{label:"\u542F\u7528\u72B6\u6001",path:"is_active"},{default:n(()=>[s(c,{value:e.formData.is_active,"onUpdate:value":t[2]||(t[2]=o=>e.formData.is_active=o),name:"is_active"},{default:n(()=>[(p(!0),C(E,null,F(e.version_is_active,(o,m)=>(p(),g(l,{value:m,key:m},{default:n(()=>[h(b(o),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),s(a,{label:"\u5F3A\u5236\u66F4\u65B0",path:"is_must_update"},{default:n(()=>[s(c,{value:e.formData.is_must_update,"onUpdate:value":t[3]||(t[3]=o=>e.formData.is_must_update=o),name:"is_must_update"},{default:n(()=>[(p(!0),C(E,null,F(e.version_is_must_update,(o,m)=>(p(),g(l,{value:m,key:m},{default:n(()=>[h(b(o),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),s(a,{label:"\u70ED\u66F4\u65B0\u5730\u5740",path:"tag"},{default:n(()=>[s(u,{maxlength:50,value:e.formData.wgt_url,"onUpdate:value":t[4]||(t[4]=o=>e.formData.wgt_url=o),placeholder:"\u8F93\u5165\u70ED\u66F4\u65B0\u5730\u5740"},null,8,["value"])]),_:1}),s(a,{label:"\u66F4\u65B0\u516C\u544A",path:"notice"},{default:n(()=>[s(u,{value:e.formData.notice,"onUpdate:value":t[5]||(t[5]=o=>e.formData.notice=o),type:"textarea","max-length":9e3,placeholder:"\u516C\u544A\u5185\u5BB9"},null,8,["value"])]),_:1})]),s(a,null,{default:n(()=>[s(k,{type:"primary","attr-type":"button",onClick:e.handleOk},{default:n(()=>[h(b(e.title),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","show"])}const le=J(x,[["render",te],["__scopeId","data-v-d1a32211"]]);export{le as default};
