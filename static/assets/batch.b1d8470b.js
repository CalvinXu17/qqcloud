var p=(e,r,n)=>new Promise((o,t)=>{var i=u=>{try{l(n.next(u))}catch(c){t(c)}},a=u=>{try{l(n.throw(u))}catch(c){t(c)}},l=u=>u.done?o(u.value):Promise.resolve(u.value).then(i,a);l((n=n.apply(e,r)).next())});import{B as f}from"./index.62164120.js";import{d as D,I as m,u as C,x as g,o as k,c as b,i as E,w as y,k as F,p as S,W as h}from"./index.59f76cad.js";const w=D({props:{rows:{type:Array,default(){return[]}},form:{type:Object,default(){return{}}}},setup(e,{emit:r}){const n=m();let o=null;const t=C(),i=[{label:"\u64CD\u4F5C\u9009\u4E2D",key:"1",children:[{label:"\u9501\u5B9A\u9009\u4E2D",key:"lock_1"},{label:"\u89E3\u9501\u9009\u4E2D",key:"unlock_1"},{label:"\u89E3\u7ED1\u9009\u4E2D",key:"unbind_1"},{label:"\u5220\u9664\u9009\u4E2D",key:"delete_1"}]},{label:"\u64CD\u4F5C\u7B5B\u9009",key:"2",children:[{label:"\u9501\u5B9A\u7B5B\u9009",key:"lock_2"},{label:"\u89E3\u9501\u7B5B\u9009",key:"unlock_2"},{label:"\u89E3\u7ED1\u7B5B\u9009",key:"unbind_2"},{label:"\u5220\u9664\u7B5B\u9009",key:"delete_2"}]}];let a=e.form;const l=JSON.stringify(a),u=()=>e.rows.length!==0;return{options:i,handleSelect:d=>p(this,null,function*(){let s=JSON.parse(JSON.stringify(e.form)),B=JSON.parse(JSON.stringify(e.rows));const _=d.split("_");if(Number(_[1])===2){if(l==JSON.stringify(a))return t.warning("\u8BF7\u81F3\u5C11\u8BBE\u7F6E\u4E00\u4E2A\u7B5B\u9009\u6761\u4EF6")}else{if(!u())return t.warning("\u8BF7\u81F3\u5C11\u9009\u4E2D\u4E00\u9879\u6570\u636E");s.id=JSON.stringify(B)}o=t.create("\u52A0\u8F7D\u4E2D...",{type:"loading",duration:1e4}),_[0]==="delete"?n.warning({title:"\u6E29\u99A8\u63D0\u793A",content:"\u5220\u9664\u64CD\u4F5C\u5C06\u4E0D\u53EF\u9006!(\u8BF7\u8C28\u614E\u64CD\u4F5C)",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",onPositiveClick:()=>p(this,null,function*(){s.type=d,yield f(s),o.destroy(),r("on-update")}),onNegativeClick:()=>{t.error("\u53D6\u6D88\u64CD\u4F5C"),o.destroy()}}):(s.type=d,yield f(s),o.destroy(),r("on-update"))})}}});function N(e,r,n,o,t,i){const a=S,l=h;return k(),b("div",null,[E(l,{options:e.options,placement:"bottom-start",trigger:"click",onSelect:e.handleSelect},{default:y(()=>[E(a,null,{default:y(()=>[F("\u6279\u91CF\u64CD\u4F5C")]),_:1})]),_:1},8,["options","onSelect"])])}const J=g(w,[["render",N]]);export{J as default};
